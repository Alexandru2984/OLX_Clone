================================================================================
               GHID COMPLET: CONFIGURARE OLX CLONE PE DOMENIUL TÄ‚U
================================================================================

ğŸ“… Data: 22 Iulie 2025
ğŸ¯ Obiectiv: Deploy OLX Clone pe VPS cu domeniul personal È™i email propriu

================================================================================
1. PREGÄ‚TIREA PROIECTULUI PENTRU PRODUCTION
================================================================================

1.1. VerificÄƒ fiÈ™ierele de configurare existente:
   âœ… olx_clone/settings_production.py - creat
   âœ… .env.production.example - creat
   âœ… deploy.sh - actualizat

1.2. ActualizeazÄƒ settings_production.py cu domeniul tÄƒu:
   - ÃnlocuieÈ™te 'yourdomain.com' cu domeniul tÄƒu real
   - ÃnlocuieÈ™te 'your-server-ip' cu IP-ul VPS-ului tÄƒu

================================================================================
2. CONFIGURARE EMAIL ÃN cPANEL/HOSTING
================================================================================

2.1. CreeazÄƒ adresele de email Ã®n cPanel:
   ğŸ“§ noreply@yourdomain.com   (pentru emailuri automate)
   ğŸ“§ admin@yourdomain.com     (pentru notificÄƒri admin)
   ğŸ“§ server@yourdomain.com    (pentru erori de server)

2.2. GÄƒseÈ™te setÄƒrile SMTP Ã®n cPanel:
   - Mergi la "Email" â†’ "Email Accounts" â†’ "Connect Devices"
   - NoteazÄƒ setÄƒrile:
     * Outgoing Server: mail.yourdomain.com sau smtp.yourdomain.com
     * Port: 587 (TLS) sau 465 (SSL)
     * Authentication: Da
     * Username: noreply@yourdomain.com
     * Password: parola pe care o setezi

2.3. TesteazÄƒ emailul din cPanel:
   - Trimite un email de test pentru a verifica configuraÈ›ia

================================================================================
3. CONFIGURARE ENVIRONMENT VARIABLES
================================================================================

3.1. CreeazÄƒ fiÈ™ierul .env pe server:
```
DJANGO_ENV=production
DJANGO_DEBUG=False
SECRET_KEY=genereaza-un-secret-key-foarte-lung-si-random

# Database Configuration
DB_NAME=olx_clone_db
DB_USER=olx_user
DB_PASSWORD=parola-foarte-sigura-pentru-db
DB_HOST=localhost
DB_PORT=5432

# Email Configuration pentru domeniul tÄƒu
EMAIL_HOST=mail.yourdomain.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=noreply@yourdomain.com
EMAIL_HOST_PASSWORD=parola-din-cpanel

# Alternative pentru cPanel/Shared Hosting (dacÄƒ primul nu merge):
# EMAIL_HOST=smtp.yourdomain.com
# EMAIL_PORT=465
# EMAIL_USE_TLS=False
# EMAIL_USE_SSL=True
```

3.2. GenereazÄƒ SECRET_KEY nou:
```python
from django.core.management.utils import get_random_secret_key
print(get_random_secret_key())
```

================================================================================
4. ACTUALIZARE FIÈ˜IERE DE CONFIGURARE
================================================================================

4.1. EditeazÄƒ olx_clone/settings_production.py:
```python
# ÃnlocuieÈ™te 'yourdomain.com' cu domeniul tÄƒu real
ALLOWED_HOSTS = [
    'yourdomain.com',           # SCHIMBÄ‚ CU DOMENIUL TÄ‚U
    'www.yourdomain.com',       # SCHIMBÄ‚ CU DOMENIUL TÄ‚U
    'your-server-ip',           # SCHIMBÄ‚ CU IP-UL VPS-ULUI
    'localhost',
    '127.0.0.1'
]

# Email defaults pentru domeniul tÄƒu
DEFAULT_FROM_EMAIL = 'OLX Clone <noreply@yourdomain.com>'  # SCHIMBÄ‚
SERVER_EMAIL = 'server@yourdomain.com'                      # SCHIMBÄ‚
ADMINS = [
    ('Admin', 'admin@yourdomain.com'),                       # SCHIMBÄ‚
    ('Your Name', 'your-email@yourdomain.com'),             # SCHIMBÄ‚
]
```

4.2. VerificÄƒ cÄƒ existÄƒ configuraÈ›ia corectÄƒ pentru email Ã®n acelaÈ™i fiÈ™ier:
```python
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = os.environ.get('EMAIL_HOST', 'mail.yourdomain.com')
EMAIL_PORT = int(os.environ.get('EMAIL_PORT', '587'))
EMAIL_USE_TLS = os.environ.get('EMAIL_USE_TLS', 'True') == 'True'
EMAIL_HOST_USER = os.environ.get('EMAIL_HOST_USER', 'noreply@yourdomain.com')
EMAIL_HOST_PASSWORD = os.environ.get('EMAIL_HOST_PASSWORD')
```

================================================================================
5. DEPLOYMENT PE VPS
================================================================================

5.1. ConecteazÄƒ-te la VPS:
```bash
ssh root@your-server-ip
# sau
ssh username@your-server-ip
```

5.2. InstaleazÄƒ dependenÈ›ele sistemului:
```bash
sudo apt update
sudo apt install -y python3-pip python3-venv nginx postgresql postgresql-contrib git
```

5.3. ConfigureazÄƒ PostgreSQL:
```bash
sudo -u postgres psql
CREATE DATABASE olx_clone_db;
CREATE USER olx_user WITH PASSWORD 'parola-foarte-sigura-pentru-db';
GRANT ALL PRIVILEGES ON DATABASE olx_clone_db TO olx_user;
ALTER USER olx_user CREATEDB;
\q
```

5.4. CreeazÄƒ directorul proiectului:
```bash
sudo mkdir -p /var/www/yourdomain.com
sudo chown $USER:www-data /var/www/yourdomain.com
cd /var/www/yourdomain.com
```

5.5. CloneazÄƒ proiectul:
```bash
git clone https://github.com/yourusername/olx-clone.git .
# sau uploads fiÈ™ierele manual prin FTP/SCP
```

5.6. ConfigureazÄƒ mediul virtual Python:
```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
pip install gunicorn psycopg2-binary
```

5.7. ConfigureazÄƒ environment variables:
```bash
cp .env.production.example .env
nano .env
# EditeazÄƒ cu datele tale din punctul 3.1
```

5.8. ConfigureazÄƒ Django:
```bash
export DJANGO_SETTINGS_MODULE=olx_clone.settings_production
python manage.py migrate
python manage.py collectstatic --noinput
python manage.py createsuperuser
```

================================================================================
6. CONFIGURARE GUNICORN SERVICE
================================================================================

6.1. CreeazÄƒ service file:
```bash
sudo nano /etc/systemd/system/olx-clone-yourdomain.service
```

6.2. ConÈ›inut service file:
```ini
[Unit]
Description=OLX Clone Django App for yourdomain.com
After=network.target

[Service]
User=www-data
Group=www-data
WorkingDirectory=/var/www/yourdomain.com
Environment="PATH=/var/www/yourdomain.com/venv/bin"
Environment="DJANGO_SETTINGS_MODULE=olx_clone.settings_production"
EnvironmentFile=/var/www/yourdomain.com/.env
ExecStart=/var/www/yourdomain.com/venv/bin/gunicorn --workers 3 --bind unix:/var/www/yourdomain.com/olx_clone.sock olx_clone.wsgi:application

[Install]
WantedBy=multi-user.target
```

6.3. ActiveazÄƒ serviciul:
```bash
sudo systemctl daemon-reload
sudo systemctl enable olx-clone-yourdomain
sudo systemctl start olx-clone-yourdomain
sudo systemctl status olx-clone-yourdomain
```

================================================================================
7. CONFIGURARE NGINX
================================================================================

7.1. CreeazÄƒ configuraÈ›ia Nginx:
```bash
sudo nano /etc/nginx/sites-available/yourdomain.com
```

7.2. ConÈ›inut configuraÈ›ie Nginx:
```nginx
server {
    listen 80;
    server_name yourdomain.com www.yourdomain.com;

    location = /favicon.ico { 
        access_log off; 
        log_not_found off; 
    }
    
    location /static/ {
        alias /var/www/yourdomain.com/staticfiles/;
    }
    
    location /media/ {
        alias /var/www/yourdomain.com/media/;
    }

    location / {
        include proxy_params;
        proxy_pass http://unix:/var/www/yourdomain.com/olx_clone.sock;
    }
}
```

7.3. ActiveazÄƒ site-ul:
```bash
sudo ln -s /etc/nginx/sites-available/yourdomain.com /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

================================================================================
8. CONFIGURARE SSL (HTTPS)
================================================================================

8.1. InstaleazÄƒ Certbot:
```bash
sudo apt install -y certbot python3-certbot-nginx
```

8.2. ObÈ›ine certificat SSL:
```bash
sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com
```

8.3. TesteazÄƒ renewarea automatÄƒ:
```bash
sudo certbot renew --dry-run
```

8.4. DupÄƒ SSL, activeazÄƒ setÄƒrile HTTPS Ã®n settings_production.py:
```python
# DecomenteazÄƒ aceste linii:
SECURE_SSL_REDIRECT = True
SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')
SESSION_COOKIE_SECURE = True
CSRF_COOKIE_SECURE = True
```

================================================================================
9. TESTARE È˜I VERIFICARE
================================================================================

9.1. VerificÄƒ cÄƒ site-ul funcÈ›ioneazÄƒ:
```bash
curl -I http://yourdomain.com
curl -I https://yourdomain.com
```

9.2. TesteazÄƒ emailul:
```bash
cd /var/www/yourdomain.com
source venv/bin/activate
export DJANGO_SETTINGS_MODULE=olx_clone.settings_production
python manage.py shell
```

Ãn shell-ul Django:
```python
from django.core.mail import send_mail
send_mail(
    'Test Email', 
    'Acesta este un email de test de la OLX Clone', 
    'noreply@yourdomain.com', 
    ['your-personal-email@gmail.com']
)
```

9.3. VerificÄƒ logs pentru erori:
```bash
sudo journalctl -u olx-clone-yourdomain -f
sudo tail -f /var/log/nginx/error.log
sudo tail -f /var/www/yourdomain.com/django.log
```

================================================================================
10. CONFIGURARE FINALÄ‚ È˜I SECURITATE
================================================================================

10.1. SchimbÄƒ parola de admin:
   - Mergi la https://yourdomain.com/admin/
   - Login cu admin/admin123 (din deployment)
   - SchimbÄƒ parola Ã®n ceva foarte sigur

10.2. ConfigureazÄƒ backup automat:
```bash
# CreeazÄƒ script backup
sudo nano /usr/local/bin/backup-olx.sh
```

ConÈ›inut script:
```bash
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/var/backups/olx-clone"
mkdir -p $BACKUP_DIR

# Backup database
sudo -u postgres pg_dump olx_clone_db > $BACKUP_DIR/db_$DATE.sql

# Backup media files
tar -czf $BACKUP_DIR/media_$DATE.tar.gz /var/www/yourdomain.com/media/

# Cleanup old backups (pÄƒstreazÄƒ doar ultimele 7 zile)
find $BACKUP_DIR -name "*.sql" -mtime +7 -delete
find $BACKUP_DIR -name "*.tar.gz" -mtime +7 -delete
```

10.3. AdaugÄƒ Ã®n crontab pentru backup zilnic:
```bash
sudo crontab -e
# AdaugÄƒ linia:
0 2 * * * /usr/local/bin/backup-olx.sh
```

================================================================================
11. VERIFICARE FINALÄ‚ - CHECKLIST
================================================================================

â–¡ Site accesibil la https://yourdomain.com
â–¡ Admin panel funcÈ›ional la https://yourdomain.com/admin/
â–¡ Email-urile se trimit cu succes
â–¡ SSL certificate activ (HTTPS)
â–¡ Toate paginile se Ã®ncarcÄƒ corect
â–¡ Upload imagini funcÈ›ioneazÄƒ
â–¡ Ãnregistrare utilizatori funcÈ›ioneazÄƒ
â–¡ Resetare parolÄƒ prin email funcÈ›ioneazÄƒ
â–¡ Mesagerie Ã®ntre utilizatori funcÈ›ioneazÄƒ
â–¡ Backup automat configurat

================================================================================
12. COMENZI UTILE PENTRU MAINTENANCE
================================================================================

12.1. Restart servicii:
```bash
sudo systemctl restart olx-clone-yourdomain
sudo systemctl restart nginx
sudo systemctl restart postgresql
```

12.2. Update proiect:
```bash
cd /var/www/yourdomain.com
git pull origin main
source venv/bin/activate
pip install -r requirements.txt
export DJANGO_SETTINGS_MODULE=olx_clone.settings_production
python manage.py migrate
python manage.py collectstatic --noinput
sudo systemctl restart olx-clone-yourdomain
```

12.3. Monitorizare logs:
```bash
# Django app logs
sudo journalctl -u olx-clone-yourdomain -f

# Nginx logs
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log

# Django application logs
tail -f /var/www/yourdomain.com/django.log
```

12.4. Backup manual:
```bash
sudo -u postgres pg_dump olx_clone_db > backup_$(date +%Y%m%d).sql
tar -czf media_backup_$(date +%Y%m%d).tar.gz /var/www/yourdomain.com/media/
```

================================================================================
13. DEPANARE PROBLEME COMUNE
================================================================================

13.1. Site nu se Ã®ncarcÄƒ:
   - VerificÄƒ dacÄƒ Gunicorn ruleazÄƒ: sudo systemctl status olx-clone-yourdomain
   - VerificÄƒ configuraÈ›ia Nginx: sudo nginx -t
   - VerificÄƒ logs: sudo journalctl -u olx-clone-yourdomain

13.2. Email-urile nu se trimit:
   - VerificÄƒ setÄƒrile SMTP Ã®n .env
   - TesteazÄƒ din Django shell
   - VerificÄƒ cÄƒ portul 587/465 nu este blocat

13.3. Erori 500:
   - VerificÄƒ logs Django: tail -f /var/www/yourdomain.com/django.log
   - VerificÄƒ configuraÈ›ia database Ã®n .env
   - RuleazÄƒ python manage.py check --deploy

13.4. Static files nu se Ã®ncarcÄƒ:
   - RuleazÄƒ python manage.py collectstatic --noinput
   - VerificÄƒ permisiunile: sudo chown -R www-data:www-data /var/www/yourdomain.com/staticfiles/

================================================================================
14. INFORMAÈšII DE CONTACT È˜I FINALIZARE
================================================================================

ğŸ‰ FelicitÄƒri! Ai configurat cu succes OLX Clone pe domeniul tÄƒu!

ğŸŒ Site-ul tÄƒu: https://yourdomain.com
ğŸ‘¨â€ğŸ’» Admin panel: https://yourdomain.com/admin/
ğŸ“§ Email test: noreply@yourdomain.com

ğŸ“ Pentru suport sau Ã®ntrebÄƒri:
   - VerificÄƒ logs-urile pentru erori
   - ConsultÄƒ documentaÈ›ia Django
   - VerificÄƒ setÄƒrile de email Ã®n cPanel

ğŸ” Securitate:
   - SchimbÄƒ parola de admin default
   - ActualizeazÄƒ regulat dependenÈ›ele: pip install --upgrade -r requirements.txt
   - MonitorizeazÄƒ logs-urile pentru activitate suspectÄƒ

================================================================================
                            SUCCES È˜I MULT NOROC! ğŸš€
================================================================================
